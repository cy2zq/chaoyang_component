"use strict";(self.webpackChunkchaoyang_component=self.webpackChunkchaoyang_component||[]).push([[8967],{79831:function(e,t,n){n.r(t),n.d(t,{downloadCsv:function(){return r.n},downloadExcel:function(){return r.r},exportVTableToCsv:function(){return i},exportVTableToExcel:function(){return l.s}});function i(e,t){const n=e.rowCount-1,i=e.colCount-1;let r="";for(let l=0;l<=n;l++){for(let n=0;n<=i;n++){const i=o(n,l,e,t);if("undefined"!=typeof Promise&&i instanceof Promise);else{const e=`${i}`;/^\[object .*\]$/.exec(e)||(r+=e)}r+=","}r+="\r\n"}return r}function o(e,t,n,i){var o;const r=n.getCellRawRecord(e,t),l=null!==(o=r&&r.vtableMergeName)&&void 0!==o?o:n.getCellValue(e,t);if(null==i?void 0:i.formatExportOutput){const o={cellType:n.getCellType(e,t),cellValue:l,table:n,col:e,row:t},r=i.formatExportOutput(o);if(void 0!==r)return"string"==typeof r?'"'+r+'"':r}const d=n.getCellRange(e,t),a=d.start.col,s=d.start.row;if(a!==e||s!==t)return"";let u=l;return(null==i?void 0:i.escape)?u=function(e){if("string"!=typeof e)return e;let t=e.replace(/"/g,'""');return/[,"\r\n]/.test(t)&&(t=`"${t}"`),t}(u):"string"==typeof u&&(u='"'+u+'"'),u}var r=n(94257),l=n(76535)},41988:function(e,t,n){n.r(t),n.d(t,{CustomLayout:function(){return a},DataStatistics:function(){return d},EventTarget:function(){return je.R},Icon:function(){return Je.J},ListTable:function(){return E.T},ListTableSimple:function(){return k},PIVOT_CHART_EVENT_TYPE:function(){return W.Z},PIVOT_TABLE_EVENT_TYPE:function(){return W.z},PivotChart:function(){return ae},PivotTable:function(){return V.I},PivotTableSimple:function(){return D},TABLE_EVENT_TYPE:function(){return Q.B},TYPES:function(){return i},VArc:function(){return Le.NP},VArea:function(){return Le.q_},VCheckBox:function(){return Ze},VCircle:function(){return Le.uU},VGlyph:function(){return Le.rE},VGroup:function(){return Le.qP},VImage:function(){return Le.rV},VLine:function(){return Le.EG},VPath:function(){return Le.VA},VPolygon:function(){return Le.sg},VRadio:function(){return We},VRect:function(){return Le.bZ},VSymbol:function(){return Le.p8},VTag:function(){return De},VText:function(){return Le.Jj},clearGlobal:function(){return qe},core:function(){return o},data:function(){return r},getDataCellPath:function(){return _e},getIcons:function(){return Ge},getTargetCell:function(){return $e.J$},graphicUtil:function(){return u.WN},jsx:function(){return Ne},register:function(){return l},registerAxis:function(){return le.R2},registerChartCell:function(){return O.LQ},registerCheckboxCell:function(){return O.yR},registerEmptyTip:function(){return le.Eg},registerImageCell:function(){return O.pk},registerLegend:function(){return le.I},registerMenu:function(){return le.FD},registerProgressBarCell:function(){return O.m4},registerRadioCell:function(){return O.Jy},registerSparkLineCell:function(){return O.dB},registerTextCell:function(){return O.ge},registerTitle:function(){return le._t},registerTooltip:function(){return le.Mh},registerVideoCell:function(){return O.au},renderChart:function(){return ze.pF},restoreMeasureText:function(){return He.sb},setCustomAlphabetCharSet:function(){return He.fg},themes:function(){return H},updateCell:function(){return Ke.wW},version:function(){return Ye}});var i={};n.r(i),n.d(i,{AggregationType:function(){return c.E},Aggregator:function(){return y.jk},AvgAggregator:function(){return y.ky},CountAggregator:function(){return y.ZP},CustomAggregator:function(){return y.Js},HierarchyState:function(){return h.g},HighlightScope:function(){return v.p},IconFuncTypeEnum:function(){return p.cI},IconPosition:function(){return p.q0},InteractionState:function(){return v.F},InternalIconName:function(){return p.up},MaxAggregator:function(){return y.Fn},MinAggregator:function(){return y.NF},NoneAggregator:function(){return y.ld},Placement:function(){return h.u},RecalculateAggregator:function(){return y.U4},RecordAggregator:function(){return y.hT},SortType:function(){return c.F},SumAggregator:function(){return y.__},cellStyleKeys:function(){return g.n},indicatorSort:function(){return y.vg},naturalSort:function(){return y.SL},registeredAggregators:function(){return y.YJ},sortBy:function(){return y.MR},typeSort:function(){return y.y4}});var o={};n.r(o),n.d(o,{BaseTable:function(){return f.D}});var r={};n.r(r),n.d(r,{CachedDataSource:function(){return P.Z},DataSource:function(){return m.o2}});var l={};n.r(l),n.d(l,{aggregator:function(){return B},chartModule:function(){return A},clearAll:function(){return z},editor:function(){return I},icon:function(){return F},theme:function(){return R}});var d={};n.r(d),n.d(d,{dateFormat:function(){return _},numberFormat:function(){return M}});var a={};n.r(a),n.d(a,{Arc:function(){return xe},CheckBox:function(){return Ie.J},Circle:function(){return ue},Container:function(){return ve},Group:function(){return Fe},GroupElement:function(){return he},Icon:function(){return ye},Image:function(){return fe},Line:function(){return Ae.x},Radio:function(){return Be.Y},Rect:function(){return Pe},Tag:function(){return Re},Text:function(){return be},percentCalc:function(){return Te}});var s=n(5260),u=n(36656),c=n(19401),v=n(52408),h=n(86036),g=n(93375),p=n(23186),y=n(99655),f=n(23206),m=n(48815),P=n(19888),C=n(45588),b=n(16079),T=n(39664),w=n(52432),x=n(74303);function S(e,t,n){const i=e[t];return e[t]=n,i}function R(e,t){return null!=t?S(T.n,e,t):T.n[e]}function F(e,t){return null!=t?S(b.c,e,t):b.c[e]}function A(e,t){return null!=t?S(w.f,e,t):w.f[e]}function I(e,t){return null!=t?S(x.X,e,t):x.X[e]}function B(e,t){null!=t&&S(y.YJ,e,t)}function K(e){for(const t in e)delete e[t]}function z(){K(T.n),K(b.c),K(w.f),K(x.X),K(y.YJ)}var H=n(70647);function M(e){return e=Object.assign({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},e),function(t){if(isNaN(t)||!isFinite(t))return"";const n=function(e,t,n){const i=(e+="").split(".");let o=i[0];const r=i.length>1?n+i[1]:"";return o=function(e,t){return e.replace(/\d+/,(function(e){return e.replace(/(\d)(?=(\d{3})+$)/g,(function(e){return`${e}${t}`}))}))}(o,t),o+r}((e.scaler*t).toFixed(e.digitsAfterDecimal),e.thousandsSep,e.decimalSep);return`${e.prefix}${n}${e.suffix}`}}function _(e,t,n,i,o){null==n&&(n=!1),null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==o&&(o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);const r=n?"UTC":"",l=function(e){return`0${e}`.substring(0,2)};return function(n){const d=new Date(Date.parse(n[e]));return t.replace(/%(.)/g,(function(e,t){switch(t){case"y":return d[`get${r}FullYear`]();case"m":return l(d[`get${r}Month`]()+1);case"n":return i[d[`get${r}Month`]()];case"d":return l(d[`get${r}Date`]());case"w":return o[d[`get${r}Day`]()];case"x":return d[`get${r}Day`]();case"H":return l(d[`get${r}Hours`]());case"M":return l(d[`get${r}Minutes`]());case"S":return l(d[`get${r}Seconds`]());default:return`%${t}`}}))}}var E=n(41155),L=n(77609),O=n(52672);(0,O.ge)();class k extends L.e{}var V=n(82126),N=n(22521);(0,O.ge)();class D extends N.Z{}var Z=n(48887),W=n(57922),$=n(95170),J=n(26221),j=n(99766),Y=n(71766),G=n(86801),q=n(68725),U=n(66990),X=n(74910),Q=n(6577),ee=n(35517),te=n(36657),ne=n(97176),ie=n(64127),oe=n(87269),re=n(95433),le=n(73403),de=n(7813);(0,le.R2)(),(0,le.Eg)(),(0,le.I)(),(0,le.FD)(),(0,le._t)(),(0,le.Mh)(),(0,O.LQ)(),(0,O.yR)(),(0,O.pk)(),(0,O.m4)(),(0,O.Jy)(),(0,O.dB)(),(0,O.ge)(),(0,O.au)();class ae extends f.D{constructor(e,t){var n,i,o,r,l,d,a,s,u,c,v,h,g,p,y,f,m,P,C,b;let T,w;"node"===X.X.mode?(t=e,e=null):e instanceof HTMLElement||(t=e,e=e.container?e.container:null),super(e,t),this.layoutNodeId={seqId:0},this._selectedDataItemsInChart=[],this._selectedDimensionInChart=[],this._chartEventMap={},t.layout&&Object.assign(t,t.layout),this.internalProps.columns=(0,G.Z)(t.columns),this.internalProps.rows=(0,G.Z)(t.rows),this.internalProps.indicators=(0,ee.u)(t.indicators),this.internalProps.columnTree=!t.indicatorsAsCol||(null===(n=t.columns)||void 0===n?void 0:n.length)||t.columnTree?(0,G.Z)(t.columnTree):[],this.internalProps.rowTree=t.indicatorsAsCol||(null===(i=t.rows)||void 0===i?void 0:i.length)||t.rowTree?(0,G.Z)(t.rowTree):[],this.internalProps.records=t.records,this.setCustomStateNameToSpec(),this.internalProps.columnResizeType=null!==(o=t.columnResizeType)&&void 0!==o?o:"column",this.internalProps.rowResizeType=null!==(r=t.rowResizeType)&&void 0!==r?r:"row",this.internalProps.dataConfig={isPivotChart:!0},this._axes=(0,q.Z)(t.axes)?t.axes:[],t.columnTree&&(!1!==t.indicatorsAsCol&&(this.internalProps.columnTree=(0,oe.VN)(this.internalProps.columnTree,t.indicators)),T=new te.KO(null!==(l=this.internalProps.columnTree)&&void 0!==l?l:[],this.layoutNodeId)),t.rowTree&&(!1===t.indicatorsAsCol&&(this.internalProps.rowTree=(0,oe.VN)(this.internalProps.rowTree,t.indicators)),w=new te.KO(null!==(d=this.internalProps.rowTree)&&void 0!==d?d:[],this.layoutNodeId));const x=(null===(a=null==w?void 0:w.dimensionKeys)||void 0===a?void 0:a.count)?w.dimensionKeys.valueArr():null!==(u=null===(s=t.rows)||void 0===s?void 0:s.reduce(((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e)),[]))&&void 0!==u?u:[],S=(null===(c=null==T?void 0:T.dimensionKeys)||void 0===c?void 0:c.count)?T.dimensionKeys.valueArr():null!==(h=null===(v=t.columns)||void 0===v?void 0:v.reduce(((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e)),[]))&&void 0!==h?h:[],R=null!==(p=null===(g=t.indicators)||void 0===g?void 0:g.reduce(((e,t)=>("string"==typeof t?e.push(t):e.push(t.indicatorKey),e)),[]))&&void 0!==p?p:[];if(this.internalProps.dataConfig.collectValuesBy=this._generateCollectValuesConfig(S,x),this.internalProps.dataConfig.aggregationRules=this._generateAggregationRules(),this.internalProps.dataConfig.dimensionSortArray=this._getDimensionSortArray(),this.dataset=new J.q(this.internalProps.dataConfig,x,S,R,this.internalProps.indicators,null===(y=t.indicatorsAsCol)||void 0===y||y,t.records,void 0,this.internalProps.columnTree,this.internalProps.rowTree,!0),this.options.indicatorsAsCol&&(0,ie.eW)(this.internalProps.indicators)){const e=t=>{t.forEach((t=>{var n;(null===(n=t.children)||void 0===n?void 0:n.length)?e(t.children):t.children=[{dimensionKey:"axis",value:""}]}))};(null===(f=this.dataset.rowHeaderTree)||void 0===f?void 0:f.length)?e(this.dataset.rowHeaderTree):this.dataset.rowHeaderTree=[{dimensionKey:"axis",value:""}]}if(t.columnTree||!1!==t.indicatorsAsCol&&(this.dataset.colHeaderTree=(0,oe.VN)(this.dataset.colHeaderTree,t.indicators)),t.rowTree||!1===t.indicatorsAsCol&&(this.dataset.rowHeaderTree=(0,oe.VN)(this.dataset.rowHeaderTree,t.indicators)),T=new te.KO(null!==(m=this.dataset.colHeaderTree)&&void 0!==m?m:[],this.layoutNodeId),w=new te.KO(null!==(P=this.dataset.rowHeaderTree)&&void 0!==P?P:[],this.layoutNodeId),this.internalProps.layoutMap=new Z.z(this,this.dataset,T,w),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.createSceneGraph(),t.title){const e=re.F.getComponent("title");this.internalProps.title=new e(t.title,this),this.scenegraph.resize()}if(this.options.emptyTip)if(this.internalProps.emptyTip)null===(C=this.internalProps.emptyTip)||void 0===C||C.resetVisible();else{const e=re.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null===(b=this.internalProps.emptyTip)||void 0===b||b.resetVisible()}setTimeout((()=>{this.fireListeners(Q.B.INITIALIZED,null)}),0)}static get EVENT_TYPE(){return W.Z}get pivotChartAxes(){return this._axes}get recordsCount(){var e;return null===(e=this.records)||void 0===e?void 0:e.length}isListTable(){return!1}isPivotTable(){return!0}isPivotChart(){return!0}_canResizeColumn(e,t){const n=super._canResizeColumn(e,t);if(n&&!this.internalProps.layoutMap.indicatorsAsCol){const t=this.internalProps.layoutMap.getBody(e,this.columnHeaderLevelCount);if(null==t?void 0:t.disableColumnResize)return!1}return n}updateOption(e){var t,n,i,o,r,l,d,a,s,u,c,v,h,g,p,y,f,m,P,C,b,T;const w=this.internalProps;let x,S;super.updateOption(e),this.layoutNodeId={seqId:0},this.internalProps.columns=(0,G.Z)(e.columns),this.internalProps.rows=(0,G.Z)(e.rows),this.internalProps.indicators=(null===(t=e.indicators)||void 0===t?void 0:t.length)?(0,ee.u)(e.indicators):[],this.internalProps.columnTree=!e.indicatorsAsCol||(null===(n=e.columns)||void 0===n?void 0:n.length)||e.columnTree?(0,G.Z)(e.columnTree):[],this.internalProps.rowTree=e.indicatorsAsCol||(null===(i=e.rows)||void 0===i?void 0:i.length)||e.rowTree?(0,G.Z)(e.rowTree):[],e.records&&(this.internalProps.records=e.records),this.setCustomStateNameToSpec(),this._selectedDataItemsInChart=[],w.columnResizeType=null!==(o=e.columnResizeType)&&void 0!==o?o:"column",w.rowResizeType=null!==(r=e.rowResizeType)&&void 0!==r?r:"row",w.dataConfig={isPivotChart:!0},this._axes=(0,q.Z)(e.axes)?e.axes:[],e.columnTree&&(!1!==e.indicatorsAsCol&&(this.internalProps.columnTree=(0,oe.VN)(this.internalProps.columnTree,e.indicators)),x=new te.KO(null!==(l=this.internalProps.columnTree)&&void 0!==l?l:[],this.layoutNodeId)),e.rowTree&&(!1===e.indicatorsAsCol&&(this.internalProps.rowTree=(0,oe.VN)(this.internalProps.rowTree,e.indicators)),S=new te.KO(null!==(d=this.internalProps.rowTree)&&void 0!==d?d:[],this.layoutNodeId));const R=(null===(a=null==S?void 0:S.dimensionKeys)||void 0===a?void 0:a.count)?S.dimensionKeys.valueArr():null!==(u=null===(s=e.rows)||void 0===s?void 0:s.reduce(((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e)),[]))&&void 0!==u?u:[],F=(null===(c=null==x?void 0:x.dimensionKeys)||void 0===c?void 0:c.count)?x.dimensionKeys.valueArr():null!==(h=null===(v=e.columns)||void 0===v?void 0:v.reduce(((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e)),[]))&&void 0!==h?h:[],A=null!==(p=null===(g=e.indicators)||void 0===g?void 0:g.reduce(((e,t)=>("string"==typeof t?e.push(t):e.push(t.indicatorKey),e)),[]))&&void 0!==p?p:[];if(this.internalProps.dataConfig.collectValuesBy=this._generateCollectValuesConfig(F,R),this.internalProps.dataConfig.aggregationRules=this._generateAggregationRules(),this.internalProps.dataConfig.dimensionSortArray=this._getDimensionSortArray(),this.dataset=new J.q(this.internalProps.dataConfig,R,F,A,this.internalProps.indicators,null===(y=e.indicatorsAsCol)||void 0===y||y,null!==(f=e.records)&&void 0!==f?f:this.internalProps.records,void 0,this.internalProps.columnTree,this.internalProps.rowTree,!0),this.options.indicatorsAsCol&&(0,ie.eW)(this.internalProps.indicators)){const e=t=>{t.forEach((t=>{var n;(null===(n=t.children)||void 0===n?void 0:n.length)?e(t.children):t.children=[{dimensionKey:"axis",value:""}]}))};(null===(m=this.dataset.rowHeaderTree)||void 0===m?void 0:m.length)?e(this.dataset.rowHeaderTree):this.dataset.rowHeaderTree=[{dimensionKey:"axis",value:""}]}if(e.columnTree||!1!==e.indicatorsAsCol&&(this.dataset.colHeaderTree=(0,oe.VN)(this.dataset.colHeaderTree,e.indicators)),e.rowTree||!1===e.indicatorsAsCol&&(this.dataset.rowHeaderTree=(0,oe.VN)(this.dataset.rowHeaderTree,e.indicators)),x=new te.KO(null!==(P=this.dataset.colHeaderTree)&&void 0!==P?P:[],this.layoutNodeId),S=new te.KO(null!==(C=this.dataset.rowHeaderTree)&&void 0!==C?C:[],this.layoutNodeId),w.layoutMap=new Z.z(this,this.dataset,x,S),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,w.releaseList&&(w.releaseList.forEach((e=>{var t;return null===(t=null==e?void 0:e.release)||void 0===t?void 0:t.call(e)})),w.releaseList=null),this.scenegraph.clearCells(),this.scenegraph.createSceneGraph(),e.title){const t=re.F.getComponent("title");this.internalProps.title=new t(e.title,this),this.scenegraph.resize()}if(this.options.emptyTip)if(this.internalProps.emptyTip)null===(b=this.internalProps.emptyTip)||void 0===b||b.resetVisible();else{const e=re.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null===(T=this.internalProps.emptyTip)||void 0===T||T.resetVisible()}return new Promise((e=>{setTimeout(e,0)}))}updatePagination(){}refreshHeader(){this.setMinMaxLimitWidth(!0),this.refreshRowColCount()}refreshRowColCount(){var e,t,n,i,o,r,l,d;const a=this,{layoutMap:s}=a.internalProps;s&&(a.colCount=null!==(e=s.colCount)&&void 0!==e?e:0,a.rowCount=null!==(t=s.rowCount)&&void 0!==t?t:0,a.internalProps.frozenColCount=null!==(n=s.rowHeaderLevelCount)&&void 0!==n?n:0,a.frozenRowCount=Math.max(s.headerLevelCount,null!==(i=this.options.frozenRowCount)&&void 0!==i?i:0),a.bottomFrozenRowCount!==(null!==(o=null==s?void 0:s.bottomFrozenRowCount)&&void 0!==o?o:0)&&(a.bottomFrozenRowCount=null!==(r=null==s?void 0:s.bottomFrozenRowCount)&&void 0!==r?r:0),a.rightFrozenColCount!==(null!==(l=null==s?void 0:s.rightFrozenColCount)&&void 0!==l?l:0)&&(a.rightFrozenColCount=null!==(d=null==s?void 0:s.rightFrozenColCount)&&void 0!==d?d:0),this.stateManager.setFrozenCol(this.internalProps.frozenColCount))}_getSortFuncFromHeaderOption(e,t,n){}syncHierarchyState(e,t){var n,i;e.value===t.value&&e.dimensionKey===t.dimensionKey&&(t.hierarchyState=null!==(n=t.hierarchyState)&&void 0!==n?n:(null==t?void 0:t.children)?e.hierarchyState:void 0,null===(i=null==t?void 0:t.children)||void 0===i||i.forEach(((t,n)=>{var i;(null===(i=null==e?void 0:e.children)||void 0===i?void 0:i[n])&&t&&this.syncHierarchyState(e.children[n],t)})))}getRecordShowIndexByCell(e,t){}getTableIndexByRecordIndex(e){}getTableIndexByField(e){}getCellAddrByFieldRecord(e,t){}getBodyIndexByRow(e){const{layoutMap:t}=this.internalProps;return t.getBodyIndexByRow(e)}getBodyIndexByCol(e){const{layoutMap:t}=this.internalProps;return t.getBodyIndexByCol(e)}getCellValue(e,t,n){var i,o,r;if(!n){const n=this.getCustomMergeValue(e,t);if(n)return n}if(this.internalProps.layoutMap.isHeader(e,t)){if(this.internalProps.layoutMap.isBottomFrozenRow(e,t)||this.internalProps.layoutMap.isRightFrozenColumn(e,t)){const n=this.internalProps.layoutMap.getIndicatorKeyInChartSpec(e,t);let r;return null==n||n.forEach((e=>{const t=this.internalProps.layoutMap.getIndicatorInfo(e);t&&(r=t)})),null!==(o=null!==(i=null==r?void 0:r.title)&&void 0!==i?i:null==r?void 0:r.indicatorKey)&&void 0!==o?o:""}const{title:n,fieldFormat:r}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof r?r(n,e,t,this):n}if(this.dataset){let n;const i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),o=i.colHeaderPaths.map(((e,t)=>{var i;return e.indicatorKey&&(n={position:"col",index:t}),null!==(i=e.indicatorKey)&&void 0!==i?i:e.value})),r=i.rowHeaderPaths.map(((e,t)=>{var i;return e.indicatorKey&&(n={position:"row",index:t}),null!==(i=e.indicatorKey)&&void 0!==i?i:e.value})),l=this.dataset.getAggregator(r,o,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,n);return l.value?l.value():void 0}const{fieldFormat:l}=this.internalProps.layoutMap.getBody(e,t),d=this.getBodyIndexByRow(t),a=this.getBodyIndexByCol(e),s=null===(r=this.records[d])||void 0===r?void 0:r[a];return"function"==typeof l?l(s,e,t,this):s}getCellOriginValue(e,t){var n,i,o;const r=this;if(r.internalProps.layoutMap.isHeader(e,t)){if(this.internalProps.layoutMap.isBottomFrozenRow(e,t)||this.internalProps.layoutMap.isRightFrozenColumn(e,t)){const o=this.internalProps.layoutMap.getIndicatorKeyInChartSpec(e,t);let r;return null==o||o.forEach((e=>{const t=this.internalProps.layoutMap.getIndicatorInfo(e);t&&(r=t)})),null!==(i=null!==(n=null==r?void 0:r.title)&&void 0!==n?n:null==r?void 0:r.indicatorKey)&&void 0!==i?i:""}const{title:o}=r.internalProps.layoutMap.getHeader(e,t);return"function"==typeof o?o():o}if(this.dataset){let n;const i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),o=i.colHeaderPaths.map(((e,t)=>{var i;return e.indicatorKey&&(n={position:"col",index:t}),null!==(i=e.indicatorKey)&&void 0!==i?i:e.value})),r=i.rowHeaderPaths.map(((e,t)=>{var i;return e.indicatorKey&&(n={position:"row",index:t}),null!==(i=e.indicatorKey)&&void 0!==i?i:e.value})),l=this.dataset.getAggregator(r,o,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,n);return l.value?l.value():void 0}const l=this.getBodyIndexByRow(t),d=this.getBodyIndexByCol(e);return null===(o=this.records[l])||void 0===o?void 0:o[d]}getCellRawValue(e,t){return this.getCellOriginValue(e,t)}getCellOriginRecord(e,t){if(!this.internalProps.layoutMap.isHeader(e,t)&&this.dataset){let n;const i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),o=i.colHeaderPaths.map(((e,t)=>{var i;return e.indicatorKey&&(n={position:"col",index:t}),null!==(i=e.indicatorKey)&&void 0!==i?i:e.value})),r=i.rowHeaderPaths.map(((e,t)=>{var i;return e.indicatorKey&&(n={position:"row",index:t}),null!==(i=e.indicatorKey)&&void 0!==i?i:e.value}));return this.dataset.getAggregator(r,o,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,n).records}}getCellRawRecord(e,t){return this.getCellOriginRecord(e,t)}getPivotSortState(e,t){if(!this.pivotSortState)return;const n=this.getCellRange(e,t);for(let e=0;e<this.pivotSortState.length;e++){const{col:t,row:i,order:o}=this.pivotSortState[e];if((0,$._Z)(n,t,i))return o}}_moveHeaderPosition(e,t){var n,i,o,r;const l=this.internalProps.layoutMap.moveHeaderPosition(e,t);if(l){if("column"===l.moveType){if((null===(i=null===(n=this.options.records)||void 0===n?void 0:n[0])||void 0===i?void 0:i.constructor)===Array)for(let e=0;e<this.internalProps.records.length;e++){const t=this.internalProps.records[e].splice(l.sourceIndex-this.rowHeaderLevelCount,l.sourceSize);t.unshift(l.targetIndex-this.rowHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records[e],t)}this.colWidthsMap.adjustOrder(l.sourceIndex,l.targetIndex,l.sourceSize),this.setMinMaxLimitWidth()}else if("row"===l.moveType){if((null===(r=null===(o=this.options.records)||void 0===o?void 0:o[0])||void 0===r?void 0:r.constructor)===Array){const e=this.internalProps.records.splice(l.sourceIndex-this.columnHeaderLevelCount,l.sourceSize);e.unshift(l.targetIndex-this.columnHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records,e)}this.rowHeightsMap.adjustOrder(l.sourceIndex,l.targetIndex,l.sourceSize)}return l}return null}toggleHierarchyState(e,t,n=!0){}getHeaderCellAddressByPath(e){return this.internalProps.layoutMap.getPivotCellAdress(e)}getCellAddressByHeaderPaths(e){return this.internalProps.layoutMap.getCellAdressByHeaderPath(e)}getHeaderPathByXY(e){let t;return t=e?this.getCellAt(e.x+this.getFrozenColsWidth()+this.scrollLeft+1,e.y+this.getFrozenRowsHeight()+this.scrollTop+1):this.getCellAt(this.getFrozenColsWidth()+this.scrollLeft+1,this.getFrozenRowsHeight()+this.scrollTop+1),this.internalProps.layoutMap.getCellHeaderPaths(t.col,t.row)}getHierarchyState(e,t){var n;return null===(n=this._getHeaderLayoutMap(e,t))||void 0===n?void 0:n.hierarchyState}_hasHierarchyTreeHeader(){return"tree"===this.internalProps.layoutMap.rowHierarchyType}getMenuInfo(e,t,n){const i=this.internalProps.layoutMap.getPivotDimensionInfo(e,t);return{dimensionKey:i[i.length-1].dimensionKey,value:this.getCellValue(e,t),cellLocation:this.getCellLocation(e,t),isPivotCorner:this.isCornerHeader(e,t),event:void 0}}_generateCollectValuesConfig(e,t){var n,i,o,r,l,d,a,s,u,c,v,h,g,p,y,f,m;e=e.filter((e=>e!==ne.ek)),t=t.filter((e=>e!==ne.ek));const P=this.internalProps.indicators,C={};for(let b=0,T=null==P?void 0:P.length;b<T;b++)if("string"!=typeof P[b]&&P[b].chartSpec){if("pie"===(null===(n=P[b].chartSpec)||void 0===n?void 0:n.type)||"rose"===(null===(i=P[b].chartSpec)||void 0===i?void 0:i.type)||"radar"===(null===(o=P[b].chartSpec)||void 0===o?void 0:o.type)||"gauge"===(null===(r=P[b].chartSpec)||void 0===r?void 0:r.type)||"wordCloud"===(null===(l=P[b].chartSpec)||void 0===l?void 0:l.type))continue;const T=P[b],w=T.chartSpec;if(!1===this.options.indicatorsAsCol)if(!1!==(null==w?void 0:w.stack)&&("bar"===(null==w?void 0:w.type)||"area"===(null==w?void 0:w.type))&&(w.stack=!0),C[T.indicatorKey]={by:t,range:!0,sumBy:(null==w?void 0:w.stack)&&e.concat(null==w?void 0:w.xField)},w.series)w.series.forEach((n=>{var i,o,r,l,d,a,s,u,c,v,h,g,p,y;const f="string"==typeof n.xField?n.xField:n.xField[0];C[f]={by:e,type:"horizontal"!==n.direction?"xField":void 0,range:(0,de.Wm)(n,this._axes,"horizontal"===n.direction,!0),sortBy:"horizontal"!==n.direction?null!==(l=null===(r=null===(o=null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.fields)||void 0===o?void 0:o[f])||void 0===r?void 0:r.domain)&&void 0!==l?l:null===(s=null===(a=null===(d=null==w?void 0:w.data)||void 0===d?void 0:d.fields)||void 0===a?void 0:a[f])||void 0===s?void 0:s.domain:void 0};const m=n.yField;!1!==n.stack&&("bar"===n.type||"area"===n.type)&&(n.stack=!0),C[m]={by:t,range:(0,de.Wm)(n,this._axes,"horizontal"===n.direction,!1),sumBy:n.stack&&e.concat(null==n?void 0:n.xField),sortBy:"horizontal"===n.direction?null!==(h=null===(v=null===(c=null===(u=null==n?void 0:n.data)||void 0===u?void 0:u.fields)||void 0===c?void 0:c[m])||void 0===v?void 0:v.domain)&&void 0!==h?h:null===(y=null===(p=null===(g=null==w?void 0:w.data)||void 0===g?void 0:g.fields)||void 0===p?void 0:p[m])||void 0===y?void 0:y.domain:void 0,extendRange:(0,j.FJ)(w.markLine)}}));else{const n="string"==typeof w.xField?w.xField:w.xField[0];C[n]={by:e,type:"horizontal"!==w.direction?"xField":void 0,range:(0,de.Wm)(w,this._axes,"horizontal"===w.direction,!0),sortBy:"horizontal"!==w.direction?null===(s=null===(a=null===(d=null==w?void 0:w.data)||void 0===d?void 0:d.fields)||void 0===a?void 0:a[n])||void 0===s?void 0:s.domain:void 0},!1!==(null==w?void 0:w.stack)&&("bar"===(null==w?void 0:w.type)||"area"===(null==w?void 0:w.type))&&(w.stack=!0);const i=w.yField;C[i]={by:t,range:"horizontal"!==w.direction,sumBy:w.stack&&e.concat(null==w?void 0:w.xField),sortBy:"horizontal"===w.direction?null===(v=null===(c=null===(u=null==w?void 0:w.data)||void 0===u?void 0:u.fields)||void 0===c?void 0:c[i])||void 0===v?void 0:v.domain:void 0,extendRange:(0,j.FJ)(w.markLine)}}else{const n=P[b];if(!1!==(null==w?void 0:w.stack)&&("bar"===(null==w?void 0:w.type)||"area"===(null==w?void 0:w.type))&&(w.stack=!0),C[n.indicatorKey]={by:e,range:!0,sumBy:(null==w?void 0:w.stack)&&t.concat(null==w?void 0:w.yField)},w.series)w.series.forEach((n=>{var i,o,r,l,d,a,s,u,c,v,h,g,p,y;const f="string"==typeof n.yField?n.yField:n.yField[0];C[f]={by:t,type:"horizontal"===n.direction?"yField":void 0,range:(0,de.Wm)(n,this._axes,"horizontal"===n.direction,!1),sortBy:"horizontal"===n.direction?null!==(l=null===(r=null===(o=null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.fields)||void 0===o?void 0:o[f])||void 0===r?void 0:r.domain)&&void 0!==l?l:null===(s=null===(a=null===(d=null==w?void 0:w.data)||void 0===d?void 0:d.fields)||void 0===a?void 0:a[f])||void 0===s?void 0:s.domain:void 0};const m=n.xField;!1!==n.stack&&("bar"===n.type||"area"===n.type)&&(n.stack=!0),C[m]={by:e,range:(0,de.Wm)(n,this._axes,"horizontal"===n.direction,!0),sumBy:n.stack&&t.concat(null==n?void 0:n.yField),sortBy:"horizontal"!==n.direction?null!==(h=null===(v=null===(c=null===(u=null==n?void 0:n.data)||void 0===u?void 0:u.fields)||void 0===c?void 0:c[m])||void 0===v?void 0:v.domain)&&void 0!==h?h:null===(y=null===(p=null===(g=null==w?void 0:w.data)||void 0===g?void 0:g.fields)||void 0===p?void 0:p[m])||void 0===y?void 0:y.domain:void 0,extendRange:(0,j.FJ)(w.markLine)}}));else{const n="string"==typeof w.yField?w.yField:w.yField[0];C[n]={by:t,type:"horizontal"===w.direction?"yField":void 0,range:(0,de.Wm)(w,this._axes,"horizontal"===w.direction,!1),sortBy:"horizontal"===w.direction?null===(p=null===(g=null===(h=null==w?void 0:w.data)||void 0===h?void 0:h.fields)||void 0===g?void 0:g[n])||void 0===p?void 0:p.domain:void 0},!1!==(null==w?void 0:w.stack)&&("bar"===(null==w?void 0:w.type)||"area"===(null==w?void 0:w.type))&&(w.stack=!0);const i=w.xField;C[i]={by:e,range:(0,de.Wm)(w,this._axes,"horizontal"===w.direction,!0),sumBy:w.stack&&t.concat(null==w?void 0:w.yField),sortBy:"horizontal"!==w.direction?null===(m=null===(f=null===(y=null==w?void 0:w.data)||void 0===y?void 0:y.fields)||void 0===f?void 0:f[i])||void 0===m?void 0:m.domain:void 0,extendRange:(0,j.FJ)(w.markLine)}}}}return C}_generateAggregationRules(){var e;const t=[];return null===(e=this.internalProps.indicators)||void 0===e||e.forEach((e=>{var n,i;if("string"==typeof e)t.push({indicatorKey:e,field:e,aggregationType:c.E.RECORD});else if(null===(n=e.chartSpec)||void 0===n?void 0:n.series){const n=[];null===(i=e.chartSpec)||void 0===i||i.series.forEach((e=>{const t=!1===this.options.indicatorsAsCol?e.yField:e.xField;-1===n.indexOf(t)&&n.push(t)})),t.push({indicatorKey:e.indicatorKey,field:n,aggregationType:c.E.RECORD})}else{const n=!1===this.options.indicatorsAsCol?e.chartSpec.yField:e.chartSpec.xField;t.push({indicatorKey:e.indicatorKey,field:null!=n?n:e.indicatorKey,aggregationType:c.E.RECORD})}})),t}setCustomStateNameToSpec(){var e;const t=e=>{var t,n,i,o,r,l,d,a,s,u;(null===(n=null===(t=e.bar)||void 0===t?void 0:t.state)||void 0===n?void 0:n.selected)&&(e.bar.state.vtable_selected=e.bar.state.selected,e.bar.state.vtable_selected_reverse=e.bar.state.selected_reverse,delete e.bar.state.selected,delete e.bar.state.selected_reverse),(null===(o=null===(i=e.point)||void 0===i?void 0:i.state)||void 0===o?void 0:o.selected)&&(e.point.state.vtable_selected=e.point.state.selected,e.point.state.vtable_selected_reverse=e.point.state.selected_reverse,delete e.point.state.selected,delete e.point.state.selected_reverse),(null===(l=null===(r=e.line)||void 0===r?void 0:r.state)||void 0===l?void 0:l.selected)&&(e.line.state.vtable_selected=e.line.state.selected,e.line.state.vtable_selected_reverse=e.line.state.selected_reverse,delete e.line.state.selected,delete e.line.state.selected_reverse),(null===(a=null===(d=e.area)||void 0===d?void 0:d.state)||void 0===a?void 0:a.selected)&&(e.area.state.vtable_selected=e.area.state.selected,e.area.state.vtable_selected_reverse=e.area.state.selected_reverse,delete e.area.state.selected,delete e.area.state.selected_reverse),(null===(u=null===(s=e.pie)||void 0===s?void 0:s.state)||void 0===u?void 0:u.selected)&&(e.pie.state.vtable_selected=e.pie.state.selected,e.pie.state.vtable_selected_reverse=e.pie.state.selected_reverse,delete e.pie.state.selected,delete e.pie.state.selected_reverse)};null===(e=this.internalProps.indicators)||void 0===e||e.forEach((e=>{if(e.chartSpec){const n=e.chartSpec;n.series?n.series.forEach((e=>{t(e)})):t(n)}}))}updateFilterRules(e){this.internalProps.dataConfig.filterRules=e,this.dataset.updateFilterRules(e),(0,Y.RW)(this.scenegraph),(0,Y.zO)(this.scenegraph),this.render()}clearChartCacheImage(e,t){(0,U.Z)(e)&&(0,U.Z)(t)?(0,Y.KP)(e,t,this.scenegraph):(0,Y.RW)(this.scenegraph)}getLegendSelected(){var e;const t=[];return null===(e=this.internalProps.legends)||void 0===e||e.forEach((e=>{const n=e.legendComponent._getSelectedLegends().map((e=>e.label));t.push(...n)})),t}setLegendSelected(e){var t;null===(t=this.internalProps.legends)||void 0===t||t.forEach((t=>{t.legendComponent.setSelected(e)}))}getChartDatumPosition(e,t){const{chartInstance:n,bounds:i}=this.getChartInstance(t);if(n){const t=n.convertDatumToPosition(e);return t?{x:Math.round(t.x+i.x1),y:Math.round(t.y+i.y1)}:null}return null}getCellAddressByRecord(e){const t=[],n=[],i={},o=[];this.dataset.dataConfig.aggregationRules.forEach((e=>{if("string"==typeof e.field)i[e.field]=e.indicatorKey,o.push(e.field);else for(let t=0;t<e.field.length;t++)i[e.field[t]]=e.indicatorKey,o.push(e.field[t])}));for(const r in e)this.dataset.rows.indexOf(r)>=0&&t.push({dimensionKey:r,value:e[r]}),this.dataset.columns.indexOf(r)>=0&&n.push({dimensionKey:r,value:e[r]}),o.indexOf(r)>=0&&(this.dataset.indicatorsAsCol?n.push({indicatorKey:i[r]}):t.push({indicatorKey:i[r]}));return this.getCellAddressByHeaderPaths({rowHeaderPaths:t,colHeaderPaths:n,cellLocation:"body"})}getChartInstance(e){var t,n,i,o,r;const l=this.getCellAddressByHeaderPaths(e);if(l){const e=this.getCellRelativeRect(l.col,l.row),d=this.scenegraph.getCell(l.col,l.row);let a;const s=null===(t=null==d?void 0:d.getChildren())||void 0===t?void 0:t[0];if(s.attribute.chartInstance){a=s.attribute.chartInstance;const{dataId:e,data:t,axes:l,spec:d}=s.attribute,u=s.getViewBox();if(null==l||l.forEach(((e,t)=>{var n,i,o,r,l;"linear"===e.type?a.updateModelSpecSync({type:"axes",index:t},{min:null!==(i=null===(n=e.range)||void 0===n?void 0:n.min)&&void 0!==i?i:0,max:null!==(r=null===(o=e.range)||void 0===o?void 0:o.max)&&void 0!==r?r:0,tick:{tickMode:null===(l=e.tick)||void 0===l?void 0:l.tickMode}},!0):"band"===e.type&&a.updateModelSpec({type:"axes",index:t},{domain:e.domain.slice(0)},!0)})),a.updateViewBox({x1:u.x1-s.getRootNode().table.scrollLeft,x2:u.x2-s.getRootNode().table.scrollLeft,y1:u.y1-s.getRootNode().table.scrollTop,y2:u.y2-s.getRootNode().table.scrollTop},!1,!1),"string"==typeof e)a.updateDataSync(e,null!=t?t:[]);else{const l=[];for(const r in e){const s=e[r],u=d.series.find((e=>{var t;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.id)===r}));l.push({id:r,values:s?null!==(n=null==t?void 0:t.filter((e=>e.hasOwnProperty(s))))&&void 0!==n?n:[]:null!=t?t:[],fields:null===(i=null==u?void 0:u.data)||void 0===i?void 0:i.fields}),a.updateFullDataSync||a.updateDataSync(r,s?null!==(o=null==t?void 0:t.filter((e=>e.hasOwnProperty(s))))&&void 0!==o?o:[]:null!=t?t:[])}null===(r=a.updateFullDataSync)||void 0===r||r.call(a,l)}this.renderAsync()}return{chartInstance:a,bounds:e.bounds}}return{}}_getDimensionSortArray(){var e,t;if(null===(t=null===(e=this.options)||void 0===e?void 0:e.axes)||void 0===t?void 0:t.length){const e=this.options.indicatorsAsCol?"left":"bottom",t=this.options.axes.find((t=>t.orient===e));if(t&&(0,q.Z)(t.domain))return t.domain}}setRecords(e){var t,n;const i={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.options.records=this.internalProps.records=e;const o=this.options,r=this.internalProps;let l,d;this.dataset.setRecords(e),l=o.columnTree?r.layoutMap.columnDimensionTree:new te.KO(null!==(t=this.dataset.colHeaderTree)&&void 0!==t?t:[],this.layoutNodeId),d=o.rowTree?r.layoutMap.rowDimensionTree:new te.KO(null!==(n=this.dataset.rowHeaderTree)&&void 0!==n?n:[],this.layoutNodeId),r.layoutMap=new Z.z(this,this.dataset,l,d),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(i.col,i.row),this.internalProps.title&&!this.internalProps.title.isReleased&&(this._updateSize(),this.internalProps.title.resize(),this.scenegraph.resize()),this.eventManager.updateEventBinder()}_hasCustomRenderOrLayout(){if(this.options.customRender)return!0;const{columnsDefine:e,rowsDefine:t,indicatorsDefine:n}=this.internalProps.layoutMap;for(let t=0;t<e.length;t++){const n=e[t];if("string"!=typeof n&&(n.headerCustomLayout||n.headerCustomRender))return!0}for(let e=0;e<t.length;e++){const n=t[e];if("string"!=typeof n&&(n.headerCustomLayout||n.headerCustomRender))return!0}for(let e=0;e<n.length;e++){const t=n[e];if("string"!=typeof t&&(t.customLayout||t.headerCustomLayout||t.customRender||t.headerCustomRender))return!0}return!1}changeRecordOrder(e,t){}getLayoutColumnTree(){return this.internalProps.layoutMap.getLayoutColumnTree()}getLayoutColumnTreeCount(){return this.internalProps.layoutMap.getLayoutColumnTreeCount()}getLayoutRowTree(){return this.internalProps.layoutMap.getLayoutRowTree()}getLayoutRowTreeCount(){return this.internalProps.layoutMap.getLayoutRowTreeCount()}getCellHeaderTreeNodes(e,t){return this.internalProps.layoutMap.getCellHeaderPathsWithTreeNode(e,t)}}var se=n(41152);class ue extends se.C{constructor(e){var t,n,i,o,r,l,d,a,s,u;const c=(0,q.Z)(e.boundsPadding),v=[null!==(n=null!==(t=e.marginTop)&&void 0!==t?t:c?e.boundsPadding[0]:e.boundsPadding)&&void 0!==n?n:0,null!==(o=null!==(i=e.marginRight)&&void 0!==i?i:c?e.boundsPadding[1]:e.boundsPadding)&&void 0!==o?o:0,null!==(d=null!==(r=e.marginBottom)&&void 0!==r?r:c?null!==(l=e.boundsPadding[2])&&void 0!==l?l:e.boundsPadding[0]:e.boundsPadding)&&void 0!==d?d:0,null!==(u=null!==(a=e.marginLeft)&&void 0!==a?a:c?null!==(s=e.boundsPadding[3])&&void 0!==s?s:e.boundsPadding[1]:e.boundsPadding)&&void 0!==u?u:0];e.boundsPadding=v,super(e)}}var ce=n(92096);class ve extends ce.ZA{constructor(e){var t,n,i,o,r,l,d,a,s,u,c,v,h,g;e.direction&&(e.flexDirection=e.direction),!e.justifyContent||"start"!==e.justifyContent&&"end"!==e.justifyContent||(e.justifyContent="flex-"+e.justifyContent),!e.alignItems||"start"!==e.alignItems&&"end"!==e.alignItems||(e.alignItems="flex-"+e.alignItems),!e.alignContent||"start"!==e.alignContent&&"end"!==e.alignContent||(e.alignContent="flex-"+e.alignContent),e.display="flex",e.flexDirection||(e.flexDirection="row"),e.clip=!0,e.fill=null===(t=null==e?void 0:e.background)||void 0===t?void 0:t.fill,e.stroke=null===(n=null==e?void 0:e.background)||void 0===n?void 0:n.stroke,e.lineWidth=null===(i=null==e?void 0:e.background)||void 0===i?void 0:i.lineWidth,e.cornerRadius=null===(o=null==e?void 0:e.background)||void 0===o?void 0:o.cornerRadius;const p=(0,q.Z)(e.boundsPadding),y=[null!==(l=null!==(r=e.marginTop)&&void 0!==r?r:p?e.boundsPadding[0]:e.boundsPadding)&&void 0!==l?l:0,null!==(a=null!==(d=e.marginRight)&&void 0!==d?d:p?e.boundsPadding[1]:e.boundsPadding)&&void 0!==a?a:0,null!==(c=null!==(s=e.marginBottom)&&void 0!==s?s:p?null!==(u=e.boundsPadding[2])&&void 0!==u?u:e.boundsPadding[0]:e.boundsPadding)&&void 0!==c?c:0,null!==(g=null!==(v=e.marginLeft)&&void 0!==v?v:p?null!==(h=e.boundsPadding[3])&&void 0!==h?h:e.boundsPadding[1]:e.boundsPadding)&&void 0!==g?g:0];e.boundsPadding=y,super(e)}}class he extends ve{constructor(e){e.flexWrap="nowrap",super(e)}}var ge=n(44474),pe=n(44409);class ye extends ge.E{constructor(e){var t,n,i,o,r,l,d,a,s,u,c,v;let h;(0,pe.Z)(e.iconName)&&(h=C.U()[e.iconName],h&&(e.width=null!==(t=e.width)&&void 0!==t?t:h.width,e.height=null!==(n=e.height)&&void 0!==n?n:h.height,e.svg=h.svg,e.cursor=h.cursor)),e.svg&&(e.image=e.svg);const g=(0,q.Z)(e.boundsPadding),p=[null!==(o=null!==(i=e.marginTop)&&void 0!==i?i:g?e.boundsPadding[0]:e.boundsPadding)&&void 0!==o?o:0,null!==(l=null!==(r=e.marginRight)&&void 0!==r?r:g?e.boundsPadding[1]:e.boundsPadding)&&void 0!==l?l:0,null!==(s=null!==(d=e.marginBottom)&&void 0!==d?d:g?null!==(a=e.boundsPadding[2])&&void 0!==a?a:e.boundsPadding[0]:e.boundsPadding)&&void 0!==s?s:0,null!==(v=null!==(u=e.marginLeft)&&void 0!==u?u:g?null!==(c=e.boundsPadding[3])&&void 0!==c?c:e.boundsPadding[1]:e.boundsPadding)&&void 0!==v?v:0];e.boundsPadding=p,super(e),this.cache=h}}class fe extends ge.E{constructor(e){var t,n,i,o,r,l,d,a,s,u;e.src&&(e.image=e.src),"circle"===e.shape&&(e.cornerRadius=e.width/2);const c=(0,q.Z)(e.boundsPadding),v=[null!==(n=null!==(t=e.marginTop)&&void 0!==t?t:c?e.boundsPadding[0]:e.boundsPadding)&&void 0!==n?n:0,null!==(o=null!==(i=e.marginRight)&&void 0!==i?i:c?e.boundsPadding[1]:e.boundsPadding)&&void 0!==o?o:0,null!==(d=null!==(r=e.marginBottom)&&void 0!==r?r:c?null!==(l=e.boundsPadding[2])&&void 0!==l?l:e.boundsPadding[0]:e.boundsPadding)&&void 0!==d?d:0,null!==(u=null!==(a=e.marginLeft)&&void 0!==a?a:c?null!==(s=e.boundsPadding[3])&&void 0!==s?s:e.boundsPadding[1]:e.boundsPadding)&&void 0!==u?u:0];e.boundsPadding=v,super(e)}}var me=n(95063);class Pe extends me.U{constructor(e){var t,n,i,o,r,l,d,a,s,u;const c=(0,q.Z)(e.boundsPadding),v=[null!==(n=null!==(t=e.marginTop)&&void 0!==t?t:c?e.boundsPadding[0]:e.boundsPadding)&&void 0!==n?n:0,null!==(o=null!==(i=e.marginRight)&&void 0!==i?i:c?e.boundsPadding[1]:e.boundsPadding)&&void 0!==o?o:0,null!==(d=null!==(r=e.marginBottom)&&void 0!==r?r:c?null!==(l=e.boundsPadding[2])&&void 0!==l?l:e.boundsPadding[0]:e.boundsPadding)&&void 0!==d?d:0,null!==(u=null!==(a=e.marginLeft)&&void 0!==a?a:c?null!==(s=e.boundsPadding[3])&&void 0!==s?s:e.boundsPadding[1]:e.boundsPadding)&&void 0!==u?u:0];e.boundsPadding=v,super(e)}}var Ce=n(85830);class be extends Ce.x{constructor(e){var t,n,i,o,r,l,d,a,s,u,c;e.textBaseline||(e.textBaseline="top");const v=(0,q.Z)(e.boundsPadding),h=[null!==(n=null!==(t=e.marginTop)&&void 0!==t?t:v?e.boundsPadding[0]:e.boundsPadding)&&void 0!==n?n:0,null!==(o=null!==(i=e.marginRight)&&void 0!==i?i:v?e.boundsPadding[1]:e.boundsPadding)&&void 0!==o?o:0,null!==(d=null!==(r=e.marginBottom)&&void 0!==r?r:v?null!==(l=e.boundsPadding[2])&&void 0!==l?l:e.boundsPadding[0]:e.boundsPadding)&&void 0!==d?d:0,null!==(u=null!==(a=e.marginLeft)&&void 0!==a?a:v?null!==(s=e.boundsPadding[3])&&void 0!==s?s:e.boundsPadding[1]:e.boundsPadding)&&void 0!==u?u:0];e.boundsPadding=h,e.fill=null!==(c=e.fill)&&void 0!==c?c:"#000",super(e)}getSize(e){this.AABBBounds.width()}}function Te(e,t=0){return{percent:e,delta:t}}var we=n(67604);class xe extends we.w{constructor(e){var t,n,i,o,r,l,d,a,s,u;const c=(0,q.Z)(e.boundsPadding),v=[null!==(n=null!==(t=e.marginTop)&&void 0!==t?t:c?e.boundsPadding[0]:e.boundsPadding)&&void 0!==n?n:0,null!==(o=null!==(i=e.marginRight)&&void 0!==i?i:c?e.boundsPadding[1]:e.boundsPadding)&&void 0!==o?o:0,null!==(d=null!==(r=e.marginBottom)&&void 0!==r?r:c?null!==(l=e.boundsPadding[2])&&void 0!==l?l:e.boundsPadding[0]:e.boundsPadding)&&void 0!==d?d:0,null!==(u=null!==(a=e.marginLeft)&&void 0!==a?a:c?null!==(s=e.boundsPadding[3])&&void 0!==s?s:e.boundsPadding[1]:e.boundsPadding)&&void 0!==u?u:0];e.boundsPadding=v,super(e)}}var Se=n(95044);class Re extends Se.V{constructor(e){var t,n,i,o,r,l,d,a,s,u;const c=(0,q.Z)(e.boundsPadding),v=[null!==(n=null!==(t=e.marginTop)&&void 0!==t?t:c?e.boundsPadding[0]:e.boundsPadding)&&void 0!==n?n:0,null!==(o=null!==(i=e.marginRight)&&void 0!==i?i:c?e.boundsPadding[1]:e.boundsPadding)&&void 0!==o?o:0,null!==(d=null!==(r=e.marginBottom)&&void 0!==r?r:c?null!==(l=e.boundsPadding[2])&&void 0!==l?l:e.boundsPadding[0]:e.boundsPadding)&&void 0!==d?d:0,null!==(u=null!==(a=e.marginLeft)&&void 0!==a?a:c?null!==(s=e.boundsPadding[3])&&void 0!==s?s:e.boundsPadding[1]:e.boundsPadding)&&void 0!==u?u:0];e.boundsPadding=v,super(e)}getSize(e){this.AABBBounds.width()}}class Fe extends ce.ZA{constructor(e){var t,n,i,o,r,l,d,a,s,u;const c=(0,q.Z)(e.boundsPadding),v=[null!==(n=null!==(t=e.marginTop)&&void 0!==t?t:c?e.boundsPadding[0]:e.boundsPadding)&&void 0!==n?n:0,null!==(o=null!==(i=e.marginRight)&&void 0!==i?i:c?e.boundsPadding[1]:e.boundsPadding)&&void 0!==o?o:0,null!==(d=null!==(r=e.marginBottom)&&void 0!==r?r:c?null!==(l=e.boundsPadding[2])&&void 0!==l?l:e.boundsPadding[0]:e.boundsPadding)&&void 0!==d?d:0,null!==(u=null!==(a=e.marginLeft)&&void 0!==a?a:c?null!==(s=e.boundsPadding[3])&&void 0!==s?s:e.boundsPadding[1]:e.boundsPadding)&&void 0!==u?u:0];e.boundsPadding=v,super(e)}}var Ae=n(64877),Ie=n(69723),Be=n(15772),Ke=n(65833),ze=n(25946),He=n(22450);function Me(e){var t,n,i,o,r,l,d,a,s,u,v;const h={seqId:0},g={isPivotChart:!0};let p,y,f,m;e.columnTree&&(!1!==e.indicatorsAsCol&&(f=(0,oe.VN)(e.columnTree,e.indicators)),p=new te.KO(null!==(t=e.columnTree)&&void 0!==t?t:[],h)),e.rowTree&&(!1===e.indicatorsAsCol&&(m=(0,oe.VN)(e.rowTree,e.indicators)),y=new te.KO(null!==(n=e.rowTree)&&void 0!==n?n:[],h));const P=(null===(i=y.dimensionKeys)||void 0===i?void 0:i.count)?y.dimensionKeys.valueArr():null!==(r=null===(o=e.rows)||void 0===o?void 0:o.reduce(((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e)),[]))&&void 0!==r?r:[],C=(null===(l=p.dimensionKeys)||void 0===l?void 0:l.count)?p.dimensionKeys.valueArr():null!==(a=null===(d=e.columns)||void 0===d?void 0:d.reduce(((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e)),[]))&&void 0!==a?a:[],b=null!==(u=null===(s=e.indicators)||void 0===s?void 0:s.reduce(((e,t)=>("string"==typeof t?e.push(t):e.push(t.indicatorKey),e)),[]))&&void 0!==u?u:[];return g.collectValuesBy=function(e,t,n){var i,o,r,l,d,a,s,u,c,v,h,g,p,y,f,m,P,C,b,T,w,x,S;const R={};for(let F=0,A=null===(i=e.indicators)||void 0===i?void 0:i.length;F<A;F++)if("string"!=typeof e.indicators[F]&&e.indicators[F].chartSpec)if(!1===e.indicatorsAsCol){const i=e.indicators[F];if(R[i.indicatorKey]={by:n,range:!0,sumBy:!1!==(null===(o=i.chartSpec)||void 0===o?void 0:o.stack)&&t.concat(null===(r=i.chartSpec)||void 0===r?void 0:r.xField)},i.chartSpec.series)i.chartSpec.series.forEach((e=>{var o,r,l,d,a,s,u,c,v,h,g,p,y,f,m,P;const C="string"==typeof e.xField?e.xField:e.xField[0];R[C]={by:t,type:"horizontal"!==e.direction?"xField":void 0,range:"horizontal"===e.direction,sortBy:"horizontal"!==e.direction?null!==(d=null===(l=null===(r=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.fields)||void 0===r?void 0:r[C])||void 0===l?void 0:l.domain)&&void 0!==d?d:null===(c=null===(u=null===(s=null===(a=i.chartSpec)||void 0===a?void 0:a.data)||void 0===s?void 0:s.fields)||void 0===u?void 0:u[C])||void 0===c?void 0:c.domain:void 0};const b=e.yField;R[b]={by:n,range:"horizontal"!==e.direction,sumBy:!1!==e.stack&&t.concat(null==e?void 0:e.xField),sortBy:"horizontal"===e.direction?null!==(p=null===(g=null===(h=null===(v=null==e?void 0:e.data)||void 0===v?void 0:v.fields)||void 0===h?void 0:h[b])||void 0===g?void 0:g.domain)&&void 0!==p?p:null===(P=null===(m=null===(f=null===(y=i.chartSpec)||void 0===y?void 0:y.data)||void 0===f?void 0:f.fields)||void 0===m?void 0:m[b])||void 0===P?void 0:P.domain:void 0}}));else{const o="string"==typeof i.chartSpec.xField?i.chartSpec.xField:i.chartSpec.xField[0];R[o]={by:t,type:"horizontal"!==i.chartSpec.direction?"xField":void 0,range:"horizontal"===i.chartSpec.direction,sortBy:"horizontal"!==i.chartSpec.direction?null===(s=null===(a=null===(d=null===(l=i.chartSpec)||void 0===l?void 0:l.data)||void 0===d?void 0:d.fields)||void 0===a?void 0:a[o])||void 0===s?void 0:s.domain:void 0};const r=i.chartSpec.yField;R[r]={by:n,range:"horizontal"!==e.indicators[F].chartSpec.direction,sumBy:!1!==i.chartSpec.stack&&t.concat(null===(u=i.chartSpec)||void 0===u?void 0:u.xField),sortBy:"horizontal"===i.chartSpec.direction?null===(g=null===(h=null===(v=null===(c=i.chartSpec)||void 0===c?void 0:c.data)||void 0===v?void 0:v.fields)||void 0===h?void 0:h[r])||void 0===g?void 0:g.domain:void 0}}}else{const i=e.indicators[F];if(R[i.indicatorKey]={by:t,range:!0,sumBy:!1!==(null===(p=i.chartSpec)||void 0===p?void 0:p.stack)&&n.concat(null===(y=i.chartSpec)||void 0===y?void 0:y.yField)},i.chartSpec.series)i.chartSpec.series.forEach((e=>{var o,r,l,d,a,s,u,c,v,h,g,p,y,f,m,P;const C="string"==typeof e.yField?e.yField:e.yField[0];R[C]={by:n,type:"horizontal"===e.direction?"yField":void 0,range:"horizontal"!==e.direction,sortBy:"horizontal"===e.direction?null!==(d=null===(l=null===(r=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.fields)||void 0===r?void 0:r[C])||void 0===l?void 0:l.domain)&&void 0!==d?d:null===(c=null===(u=null===(s=null===(a=i.chartSpec)||void 0===a?void 0:a.data)||void 0===s?void 0:s.fields)||void 0===u?void 0:u[C])||void 0===c?void 0:c.domain:void 0};const b=e.xField;R[b]={by:t,range:"horizontal"===e.direction,sumBy:!1!==e.stack&&n.concat(null==e?void 0:e.yField),sortBy:"horizontal"!==e.direction?null!==(p=null===(g=null===(h=null===(v=null==e?void 0:e.data)||void 0===v?void 0:v.fields)||void 0===h?void 0:h[b])||void 0===g?void 0:g.domain)&&void 0!==p?p:null===(P=null===(m=null===(f=null===(y=i.chartSpec)||void 0===y?void 0:y.data)||void 0===f?void 0:f.fields)||void 0===m?void 0:m[b])||void 0===P?void 0:P.domain:void 0}}));else{const o="string"==typeof i.chartSpec.yField?i.chartSpec.yField:i.chartSpec.yField[0];R[o]={by:n,type:"horizontal"===i.chartSpec.direction?"yField":void 0,range:"horizontal"!==i.chartSpec.direction,sortBy:"horizontal"===i.chartSpec.direction?null===(C=null===(P=null===(m=null===(f=i.chartSpec)||void 0===f?void 0:f.data)||void 0===m?void 0:m.fields)||void 0===P?void 0:P[o])||void 0===C?void 0:C.domain:void 0};const r=i.chartSpec.xField;R[r]={by:t,range:"horizontal"===e.indicators[F].chartSpec.direction,sumBy:!1!==i.chartSpec.stack&&n.concat(null===(b=i.chartSpec)||void 0===b?void 0:b.yField),sortBy:"horizontal"!==i.chartSpec.direction?null===(S=null===(x=null===(w=null===(T=i.chartSpec)||void 0===T?void 0:T.data)||void 0===w?void 0:w.fields)||void 0===x?void 0:x[r])||void 0===S?void 0:S.domain:void 0}}}return R}(e,C,P),g.aggregationRules=function(e){var t;const n=[];return null===(t=e.indicators)||void 0===t||t.forEach((t=>{var i,o;if("string"==typeof t)n.push({indicatorKey:t,field:t,aggregationType:c.E.RECORD});else if(null===(i=t.chartSpec)||void 0===i?void 0:i.series){const i=[];null===(o=t.chartSpec)||void 0===o||o.series.forEach((t=>{const n=!1===e.indicatorsAsCol?t.yField:t.xField;-1===i.indexOf(n)&&i.push(n)})),n.push({indicatorKey:t.indicatorKey,field:i,aggregationType:c.E.RECORD})}else{const i=!1===e.indicatorsAsCol?t.chartSpec.yField:t.chartSpec.xField;n.push({indicatorKey:t.indicatorKey,field:null!=i?i:t.indicatorKey,aggregationType:c.E.RECORD})}})),n}(e),{dataset:new J.q(g,P,C,b,e.indicators,null===(v=e.indicatorsAsCol)||void 0===v||v,e.records,void 0,f||e.columnTree,m||e.rowTree,!0),columnDimensionTree:p,rowDimensionTree:y,layoutNodeId:h}}function _e(e,t,n){var i,o;const r=Me(e);let l=r.columnDimensionTree,d=r.rowDimensionTree,a=!1,s=!1;e.columnTree&&e.indicatorsAsCol&&!l.dimensionKeys.contain(ne.ek)&&(a=!0),e.rowTree&&(e.indicatorsAsCol||d.dimensionKeys.contain(ne.ek)||(s=!0));const{dataset:u,layoutNodeId:c}=r,v={options:e,layoutNodeId:c,internalProps:e,isPivotChart:()=>!0,pivotChartAxes:[],_selectedDataItemsInChart:[],_getActiveChartInstance:()=>({updateState:()=>{}})};e.columnTree&&!a||(l=new te.KO(null!==(i=u.colHeaderTree)&&void 0!==i?i:[],c)),e.rowTree&&!s||(d=new te.KO(null!==(o=u.rowHeaderTree)&&void 0!==o?o:[],c));const h=new Z.z(v,u,l,d);for(let e=0;e<h.colCount;e++)for(let i=0;i<h.rowCount;i++){if(h.isHeader(e,i))continue;const o=h.getCellHeaderPaths(e,i),r=o.colHeaderPaths.map((e=>{var t;return null!==(t=e.indicatorKey)&&void 0!==t?t:e.value})),l=o.rowHeaderPaths.map((e=>{var t;return null!==(t=e.indicatorKey)&&void 0!==t?t:e.value})),d=u.getAggregator(h.indicatorsAsCol?l:l.slice(0,-1),h.indicatorsAsCol?r.slice(0,-1):r,h.getIndicatorKey(e,i)),a=Ee(d.value?d.value():void 0,t,e,i,h,n);if(a)return a}}function Ee(e,t,n,i,o,r){if((0,q.Z)(e))for(let a=0;a<e.length;a++)if(r?r(e[a],t):(l=e[a],d=t,JSON.stringify(l)===JSON.stringify(d)))return o.getCellHeaderPaths(n,i);var l,d}var Le=n(46307),Oe=n(62071),ke=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};function Ve(e,t){if((0,q.Z)(e))return e.forEach((e=>Ve(e,t)));t.push(e)}function Ne(e,t,...n){const i=t||{},{key:o,name:r,id:l,attribute:d,stateProxy:a,animation:s,timeline:u}=i,c=ke(i,["key","name","id","attribute","stateProxy","animation","timeline"]);let v=e;(0,pe.Z)(e)&&(v=Oe.i[e]);const h=[];n.length&&Ve(1===n.length?n[0]:n,h);const g="Group"===v.name?new v(d):v(t);if(function(e,t,n){let i,o=!1;switch(e.type){case"richtext":case"rich/image":break;case"rich/text":i=e.attribute||{},t[0]&&(i.text=t[0]);break;default:o=!0}o?(t.forEach((t=>{t&&e.add(t)})),Object.keys(n).forEach((t=>{const i=Le.Nv[t];i&&e.on(i,n[t])}))):"richtext"===e.type&&(e.attribute.textConfig=t.map((e=>e.attribute)).filter((e=>e)))}(g,h,c),a&&(g.stateProxy=a),r&&(g.name=r),(0,q.Z)(s)){const e=g.animate();u&&e.setTimeline(u),s.forEach((t=>{e[t[0]](...t.slice(1))}))}return g}function De(e){return new Se.V(e?e.attribute:{})}function Ze(e){return new Ie.J(e?e.attribute:{})}function We(e){return new Be.Y(e?e.attribute:{})}var $e=n(97925),Je=n(18593),je=n(83130);(0,s.sTO)();const Ye="1.15.1";function Ge(){return C.U()}function qe(){z()}c.E}}]);